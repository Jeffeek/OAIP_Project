Динамическая идентификация типа данных в С++

Виртуальные методы позволяют работать с экземпляром класса без точного знания типа, однако в C++ есть и возможность динамической идентификации типов.

Для этого применяются операторы dynamic_cast и typeid.

Синтаксис такого использования dynamic_cast следующий:

dynamic_cast< Type & >( lval )

где Type& — это целевой тип преобразования, а lval — l-значение типа базового класса.

Оператор dynamic_cast пытается выполнить приведение к указанному типу с проверкой. Целевой тип операции должен быть типом указателя, ссылки или void*.

Если целевой тип — тип указателя, то аргументом должен быть указатель на объект класса.
Если целевой тип — ссылка, то аргумент должен также быть соответствующей ссылкой.
Оператор typeid возвращает ссылку на структуру type_info, которая содержит поля, позволяющие получить информацию о типе. Для его использования нужно подключить typeinfo.h.